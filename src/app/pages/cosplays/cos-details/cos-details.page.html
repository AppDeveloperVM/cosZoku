<ion-header class="bg-primary">
  <ion-toolbar>
    <ion-title *ngIf="!isLoading">{{cosplay.characterName}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button *ngIf="!isEditEnabled" (click)="enableEdit()" class="btn" color="button-add">
        EDIT
      </ion-button>
      <ion-button *ngIf="isEditEnabled" [disabled]="!detailsForm.valid" (click)="saveChanges()" class="btn" color="button-add">
        SAVE
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid class="container-fluid" [fixed]="true">
    <div class="row">
    <div class="main-card col-xl-6 offset-xl-3 col-lg-8 offset-lg-2 col-md-10 offset-md-1 col-12">
      
      <div *ngIf="isLoading">
        <ion-progress-bar type="indeterminate"></ion-progress-bar>
      </div>

      <div *ngIf="!isLoading">
        <form [formGroup]="detailsForm">
          <ion-thumbnail class="thumbnail" >
            <ion-progress-bar type="indeterminate" *ngIf="!imageReady"></ion-progress-bar>
            <img *ngIf="imageReady" alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/thumbnail.svg" />
          </ion-thumbnail>

          <ion-list class="ion-no-padding mt-2" >
            <ion-item [ngClass]="{'notclickable no-border': !isEditEnabled }" class="mb-2" fill="outline">
              <app-image-picker
              [selectedImage]="imgSrc"
              [showPreview]="detailsForm.get('imageUrl').value"
              [aspectRatio]="1 / 1"
              (imagePick)="onImagePicked($event)">
            </app-image-picker>
            </ion-item>
            <ion-item [ngClass]="{'notclickable no-border': !isEditEnabled }" class="mb-2" fill="outline">
              <ion-label color="label" position="stacked">Character Name</ion-label>
              <ion-input formControlName="characterName" [readonly]="!isEditEnabled"></ion-input>
            </ion-item>
            <ion-item [ngClass]="{'notclickable no-border': !isEditEnabled }" class="mb-2" fill="outline">
              <ion-label color="label" position="stacked">Series</ion-label>
              <ion-input formControlName="series" [readonly]="!isEditEnabled"></ion-input>
            </ion-item>
            <ion-item [ngClass]="{'notclickable no-border': !isEditEnabled }" class="mb-2" fill="outline">
              <ion-label color="label" position="stacked">Description</ion-label>
              <ion-input formControlName="description" [readonly]="!isEditEnabled"></ion-input>
            </ion-item>
          </ion-list>
        </form>

        <div padding>
          <ion-segment color="label" >
            <ion-segment-button  value="elements">
              <ion-icon name="shirt-outline"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="tasks">
              <ion-icon name="list-outline"></ion-icon>
            </ion-segment-button>
          </ion-segment>
        </div>
      </div>

    </div>
    </div>
  </ion-grid>
</ion-content>
